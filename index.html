<!DOCTYPE html>
<html lang="en">
<html>
  <head>
  	<meta charset="utf-8" />
  	<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />	  
  	<title>P2P WebRTC(manual handshake)</title>
  	<style type="text/css">
      
  	</style>
  </head>

  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div>
	<h4>Local Stream</h4>
	<br/>
	<span id=microphone_used style="right:0;position:fixed;"></span>
    </div>
    <div>
	<p>
		<video width=250 id="vdo_local" controls autoplay></video>
		Local
		<textarea rows="4" cols="50"  id="txt_local_Offer"></textarea>
		<button id="btn_local_Offer_Set">Create-Offer</button>	
	</p>	
    </div>
    <div>
	<p>
		<video width=250 id="vdo_remote" controls autoplay></video>
		Remote
		<textarea id="txt_remote_Offer" rows="4" cols="50" placeholder="Paste remote SDP"></textarea>
		<button id="btn_remote_Offer_Got">Answer</button>
	</p>	
    </div>
    <div id="dv_chat" style="overflow:scroll;"></div>
    <div>
		<br><br>
		<form action="" onsubmit="event.preventDefault();return send_Msg();">
			<input id="inp_send_Txt type="text" name="" placeholder="please chat here" size="50">
			<button type="submit">send</button>		
		</form>
    </div>	  
    <script type="text/javascript">
      	var handshake_config = { iceServers: [{"urls":"stun:stun.l.google.com:19302"}] };
	var pc = new RTCPeerConnection(handshake_config);
	var local_Stream;
	var chat_Enabled=true; 
	var context;
	var source;
	var _chat_Channel;

	navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {
	    local_Stream = stream;
    	    //Display the microphone used
    	    microphone_used.innerHTML = local_Stream.getAudioTracks()[0].label;			
	    pc.addStream(stream);
	    vdo_local.srcObject = stream;
	    vdo_local.muted = true;
	}).catch(errHandler);

	
    </script>
   </body>
</html>
